<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check Team Names</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <div style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 30px; backdrop-filter: blur(10px);">
            <h1>üìã Team Names Diagnostic</h1>
            <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 20px;">
                Checking what team names exist in the database
            </p>
            
            <div id="teamsList" style="background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 8px; padding: 15px; margin: 20px 0; min-height: 300px; max-height: 500px; overflow-y: auto; font-family: monospace; font-size: 13px;">
                <div style="color: #00d9ff;">Loading teams...</div>
            </div>

            <button onclick="window.location.href='admin.html'" class="btn-secondary" style="width: 100%; padding: 14px;">
                ‚Üê Back to Admin
            </button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, getDocs } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyCio8kkBavGfdUECfFadDGRvhLyO3DlBwI",
            authDomain: "freefire-thinkbotz.firebaseapp.com",
            projectId: "freefire-thinkbotz",
            storageBucket: "freefire-thinkbotz.firebasestorage.app",
            messagingSenderId: "513327286952",
            appId: "1:513327286952:web:e8ef8fca42f09d2b5c509d",
            measurementId: "G-K0MWN4P9PF"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const listDiv = document.getElementById('teamsList');

        async function checkTeams() {
            try {
                const snapshot = await getDocs(collection(db, 'teams'));
                listDiv.innerHTML = '';
                
                const teams = [];
                snapshot.forEach(doc => {
                    teams.push({
                        id: doc.id,
                        name: doc.data().name || 'Unknown',
                        score: doc.data().score || 0
                    });
                });

                // Sort by ID
                teams.sort((a, b) => a.id.localeCompare(b.id));

                if (teams.length === 0) {
                    listDiv.innerHTML = '<div style="color: #ff6b6b;">No teams found!</div>';
                    return;
                }

                let html = '<div style="color: #4ecca3; margin-bottom: 10px;"><strong>Total teams: ' + teams.length + '</strong></div><hr style="border: 1px solid rgba(255,255,255,0.2);"><br>';
                
                teams.forEach(team => {
                    const nameCorrect = team.name.match(/^Team\d+$/) ? '‚úÖ' : '‚ùå';
                    html += `<div>${nameCorrect} <strong>${team.id}</strong>: "${team.name}" (Score: ${team.score})</div>`;
                });

                listDiv.innerHTML = html;
            } catch (error) {
                listDiv.innerHTML = '<div style="color: #ff6b6b;">Error: ' + error.message + '</div>';
            }
        }

        checkTeams();
    </script>
</body>
</html>
